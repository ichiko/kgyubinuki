<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>加賀ゆびぬき　刺し模様シミュレータ</title>

	<link href="lib/bootstrap/bootstrap.min.css" rel="stylesheet"/>
	<link href="lib/jquery-ui/themes/base/all.css" rel="stylesheet"/>
	<link href="css/ybnk.css" rel="stylesheet"/>

	<script type="text/javascript" src="lib/jquery/jquery.js"></script>
	<script type="text/javascript" src="lib/jquery-ui/jquery-ui.min.js"></script>
	<script type="text/javascript" src="lib/knockoutjs/knockout.js"></script>
	<script type="text/javascript" src="lib/knockout-jqueryui/knockout-jqueryui.min.js"></script>

</head>
<body>
<!-- [FC2 Analyzer] http://analyzer.fc2.com/  -->
<script language="javascript" src="http://analyzer51.fc2.com/ana/processor.php?uid=2342625" type="text/javascript"></script>
<noscript><div align="right"><img src="http://analyzer51.fc2.com/ana/icon.php?uid=2342625&ref=&href=&wid=0&hei=0&col=0" /></div></noscript>
<!-- [FC2 Analyzer]  -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		  <div class="container">
			<div class="navbar-header">
			  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			  </button>
			  <a class="navbar-brand" href="../index.html">水無月の余韻</a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
			  <ul class="nav navbar-nav">
				<li class="active"><a href="#">加賀ゆびぬきシミュレータ</a></li>
			  </ul>
			</div><!--/.nav-collapse -->
		  </div>
		</nav>

		<div class="container">
			<div class="page-header">
				<h1>加賀ゆびぬき　刺し模様シミュレータ v0.1</h1>
			</div>

			<p class="lead">
			加賀ゆびぬきの刺し模様をシミュレートします。

			<ul>
			<li>手順どおりに、リストにしていけばだいたい再現します。</li>
			<li>針数の二倍の周分の手順を指定すれば、ぴっちり埋まります。（針数は、地割り一つあたりの針数です。）</li>
			<li>ぜんぶ右向きで刺した場合のみ対応しています。</li>
			</ul>
			</p>
			<p>
			できないこと。
			<ul>
			<li>くぐらせの再現。</li>
			<li>刺す方向の変更。（そのうちやりたい。）</li>
			<li>数値のエラーチェック。</li>
			</ul>
			</p>

			<h3>使い方</h3>

			<p>すべての入力は「半角」で行ってください。動かなくなったら、ページをリロードすると元に戻ります。</p>

			<ol>
			<li>「地割り」を指定します。（必ず半角数字）</li>
			<li>「針数」を指定します。針数は、地割り一つあたりの針数です。（必ず半角数字）</li>
			<li>刺しの手順を指定します。「刺し位置」、「色」、「トビ」、「周回」をそれぞれ指定します。
				<ol>
				<li>「刺し位置」は基本とする開始位置からいくつずらして刺し始めるかを指定します。(必ず半角で、0または1）</li>
				<li>「色」は、糸の色です。CSSスタイルで、色名または16進数表記に対応しています。コピペ用基本色は下記参照。（必ず半角英数）</li>
				<li>「トビ」は、トビ数を指定してください。（必ず半角数字）</li>
				<li>「周回」は、その糸で何周するかを指定します。（必ず半角数字）</li>
				</ol>
				行が足りなくなったら、「手順の追加」ボタンを押してください。<br/>
				同じ内容で別の行を指定する場合、複製元の行にある「複製」ボタンを押すことで、末尾に追加できます。<br/>
				順序を間違えた場合、「▲」ボタンまたは「▼」ボタンで順序を入れ替えられます。
				</li>
			</ol>

			<p>値が反映されないな、と思ったら<strong>全角入力でないか確認してください。</strong></p>

			<h4>
			コピペ用基本色一覧。<a href="#colorpallet_link" id="colorpallet_link">開く</a>
			</h4>
			<div id="colorpallet" style="width: 500px">
				<table class="table">
					<thead><tr>
						<th>色名</th><th>指定する値（こっちをコピペ）</th>
					</tr></thead>
					<tbody>
						<tr><td>赤</td><td>red</td></tr>
						<tr><td>オレンジ</td><td>orange</td></tr>
						<tr><td>黄色</td><td>yellow</td></tr>
						<tr><td>黄緑</td><td>greenyellow</td></tr>
						<tr><td>緑</td><td>green</td></tr>
						<tr><td>青緑</td><td>lightseagreen</td></tr>
						<tr><td>青</td><td>blue</td></tr>
						<tr><td>紫</td><td>purple</td></tr>
						<tr><td>白</td><td>white</td></tr>
						<tr><td>灰色</td><td>gray</td></tr>
						<tr><td>黒</td><td>black</td></tr>
					</tbody>
				</table>
			</div>

			<h3 class="page-header">シミュレータ</h2>

			<p>
			<canvas id="canvas" style="border: solid 1px black" width="600" height="120"></canvas>
			</p>

			<div data-bind="with: yubinuki">
				<table>
					<tbody><tr>
						<td class="form-cell">
							コマ: <input data-bind="value: fmKomaNum"/>
							<p class="invalid" data-bind="visible: !fmKomaValid()">数値を入力してください。</p>
						</td>
						<td class="form-cell">
							トビ: <input data-bind="value: fmTobiNum" />
							<p class="invalid" data-bind="visible: !fmTobiValid()">数値を入力してください。</p>
						</td>
						<td class="form-cell">
							コマ内の針数: <select data-bind="options: availableResolutions, value: fmResolutionNum"/>
						</td>
					</tr></tbody>
				</table>
			</div>

			<div class="simulator-option">
				<p data-bind="with: yubinuki">
					<input type="checkbox" data-bind="checked: fmUseOneKoma, click: clickUseOneKoma">刺し位置をずらさずに、ひとつだけ使用する(矢鱈縞)</input>
				</p>
				<p>
					<input type="checkbox" data-bind="checked: stepSimulation">途中までシミュレート</input>
					<span data-bind="text: stepNum"></span>段
					<div id="slider" class="slider" data-bind="slider: { value: stepNum, realtime: true, max: stepMax }"></div>
				</p>
			</div>
<!--
			<button data-bind="click: addPattern">手順の追加</button>
-->
			<button data-bind="click: simulate">シミュレート</button>

			<!-- ko with:yubinuki -->
			<p data-bind="visible: fmUseOneKoma">UseOne Koma only</p>
			<!-- /ko -->

			<div data-bind="with: yubinuki">
			<table class="table">
				<thead><tr>
					<th>刺し位置</th><th>向き</th><th></th><th></th><th>色</th><th>段数</th><th></th>
				</tr></thead>
				<tbody data-bind="foreach: { data: komaArray, as: 'koma' }">
					<!-- ko foreach: { data: itoArray, as: 'ito' } -->
					<tr>
						<!-- ko ifnot: $index -->
						<td>
							<input class="number" data-bind="value: koma.fmOffset"/>
							<p class="invalid" data-bind="visible: !koma.fmOffsetValid()">0以上<span data-bind="text: $parents[1].fmTobiNum"></span>未満の数値を入力してください。</p>
						</td>
						<td>
							<select data-bind="options: $parents[1].availableSasiTypes, value:koma.fmType, optionsText: 'typeName'" />
						</td>
						<td>
							<button data-bind="click: koma.addNewIto">色を追加</button>
						</td>
						<!-- /ko -->
						<!-- ko if: $index -->
						<td></td>
						<td></td>
						<td></td>
						<!-- /ko -->
						<td>
						<!-- ko if: koma.itoArray().length - 1 -->
							<a href="#" data-bind="click: koma.moveUp">▲</a>
							<a href="#" data-bind="click: koma.moveDown">▼</a>
						<!-- /ko -->
						</td>
						<td>
							<input data-bind="value: ito.fmColor" />
							<p class="invalid" data-bind="visible: !ito.fmColorValid()">色名を入力してください。</p>
						</td>
						<td>
							<input class="number" data-bind="value: ito.fmRound" />
							<p class="invalid" data-bind="visible: !ito.fmRoundValid()">1以上の数値を入力してください。</p>
						</td>
						<td>
						<!-- ko if: koma.itoArray().length - 1 -->
						<button data-bind="click: koma.removeIto">削除</button>
						<!-- /ko -->
						</td>
					</tr>
					<!-- /ko -->
				</tbody>
			</table>
			</div>
<!--
			<p>
			<input type="checkbox" data-bind="checked: step_simulation">途中までシミュレート</input>
			&nbsp;それぞれの段数: <input data-bind="value: steps" />
			</p>

			<table class="table">
				<thead><tr>
					<th>刺し位置</th><th>色</th><th>段</th><th></th><th></th><th></th>
				</tr></thead>
				<tbody data-bind="foreach: patterns">
					<tr>
						<td>
							<input data-bind="value: formattedOffset"/>
							<p class="invalid" data-bind="visible: !validOffset()">数値ではありません！</p>
						</td>
						<td><input data-bind="value: color" /></td>
						<td>
							<input data-bind="value: formattedRound" />
							<p class="invalid" data-bind="visible: !validRound()">数値ではありません！</p>
						</td>
						<td>
							<a href="#" data-bind="click: $root.moveUp">▲</a>
							<a href="#" data-bind="click: $root.moveDown">▼</a>
						</td>
						<td><a href="#" data-bind="click: $root.removePattern">削除</a></td>
						<td><a href="#" data-bind="click: $root.duplicate">複製</a></td>
					</tr>
				</tbody>
			</table>
-->
			<div class="footer">
				<p>水無月の余韻 (c) 2002-2014 Ichigo Matsuzora  松空 いちご / ichiko_revjune
			</div>

		</div><!-- .container -->

	<script type="text/javascript" src="script/main.js"></script>

</body>
</html>
